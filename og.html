<!DOCTYPE html>
<html>
<head>
  <title>Rock Paper Scissors</title>
  <meta charset="UTF-8"/>
</head>
<body>
  <script>
      const myArray = [
          'Batu',
          'Kertas',
          'Gunting'
      ];
      
      function computerPlay() {
        return myArray[~~(Math.random()*myArray.length)]
      }

      let computerSelection;
      let playerSelection;
      let computerScore;
      let playerScore;
      
      game();

      function game () {
        computerScore=0;
        playerScore=0;
        for (let i=0; i<5; i++) {
          onUserInput();
        }
        console.log(declareWinner());
        
        function declareWinner() {
          if (playerScore===computerScore) {
            alert(playerScore + '-' + computerScore + '\nSeri!');
            return playerScore + '-' + computerScore + '\nSeri!';
          } else if (playerScore>computerScore) {
            alert(playerScore + '-' + computerScore + '\nTahniah! Anda berjaya mempertahankan kemanusiaan!!');
            return playerScore + '-' + computerScore + '\nTahniah! Anda berjaya mempertahankan kemanusiaan!!';
          } else {
            alert(playerScore + '-' + computerScore + '\nAnda kalah..Manusia akan pupus sekarang!');
            return playerScore + '-' + computerScore + '\nAnda kalah..Manusia akan pupus sekarang!';
          }
        }
      }
      
      function onUserInput() {
        playerSelection = prompt('Batu, Kertas, atau Gunting?', '');
          if ((playerSelection.toLowerCase()=='batu')
              ||(playerSelection.toLowerCase()=='kertas')
              ||(playerSelection.toLowerCase()=='gunting')) {
            console.log(playRound(playerSelection,computerSelection));
          } else {
          alert('Itu pilihan yang salah!.');
          onUserInput();
        }
      }

      function playRound(playerSelection, computerSelection) {
          computerSelection = computerPlay().toLowerCase();
          playerSelection = playerSelection.toLowerCase();
          if (computerSelection==playerSelection) {
              alert('Seri!');
              return 'Seri\nSkor Mesin: ' + 
                      computerScore + '\nSkor Anda: ' + playerScore;
          } else if ((computerSelection=='batu' && playerSelection=='gunting') 
                    || (computerSelection=='gunting' && playerSelection=='kertas') 
                    || (computerSelection=='kertas' && playerSelection=='batu')) {
              alert('Anda tewas! ' + computerSelection + ' kalahkan ' + playerSelection);
              return 'Skor Mesin: ' + ++computerScore + 
                      '\nSkor Anda: ' + playerScore;
          } else {
              alert('Anda menang! ' + playerSelection + ' kalahkan ' + computerSelection);
              return 'Skor Anda: ' + ++playerScore + 
                      '\nSkor Mesin: ' + computerScore;
          }
      }
  </script>
</body>
</html>